<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link rel="stylesheet" href="style.css" />
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
	crossorigin="anonymous" />
<!-- JavaScript Bundle with Popper -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
	crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
	integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	crossorigin="anonymous"></script>
<title>Create</title>
</head>
<body style="background-color: #a3bf62">
	<nav class="navbar navbar-dark bg-dark">
		<ul class="nav nav-pills">
			<li class="nav-item"><a class="nav-link" aria-current="page"
				href="/">Home</a></li>
			<li class="nav-item"><a class="nav-link active"
				href="/createperson">Create person</a></li>
			<li class="nav-item"><a class="nav-link" href="/allpersons">List
					all Persons</a></li>
			<li class="nav-item disabled"><a class="nav-link" href="/#">Inconsistent
					Person Data</a></li>
		</ul>
	</nav>
	<h2>Create a Person</h2>
	<form action="#" th:action="@{/createperson}" th:object="${person}"
		method="post">
		<div class="col-6 mx-auto">
			<div>
				<label for="exampleFormControlInput1" class="form-label">Name
				</label> <input type="text" class="form-control" th:field="*{name}"
					id="exampleFormControlInput2" placeholder="Enter your name Here" />
				<span th:if="${#fields.hasErrors('name')}" th:errors="*{name}">
				</span>
			</div>
			<div class="mb-3">
				<label for="exampleFormControlInput1" class="form-label">Gender
				</label> <input type="text" class="form-control" th:field="*{gender}"
					id="exampleFormControlInput3" placeholder="Enter Gender" />
				<span th:if="${#fields.hasErrors('gender')}" th:errors="*{gender}">
				</span>
			</div>
			<div class="mb-3">
				<label for="exampleFormControlInput1" class="form-label">Email
					address</label> <input type="email" class="form-control"
					th:field="*{email}" id="exampleFormControlInput1"
					placeholder="name@example.com" /> <span
					th:if="${#fields.hasErrors('email')}" th:errors="*{email}">
				</span> <br /> <input class="btn btn-info" type="submit" value="submit" />
			</div>
		</div>
	</form>

	<div class="center">
		<form th:action="@{/currentcount}" th:object="${latestPageCount}">
			<h3>
				Current visiters count : <span id="visitCount"></span>
			</h3>
		</form>
	</div>
</body>
<footer>
	<p>
		Author: Naveen Reddy <br /> Java Spring Project <br /> <a
			href="mailto:nrkb1998@gmail.com">nrkb1998@gmail.com</a>
	</p>
</footer>

<script type="text/javascript">
	/* timer for auto refresh the page by calling the method in every 3 seconds*/
	setInterval(autoRefreshInThreeSeconds, 3000);

	//function to get the visit count and printing on console
	function autoRefreshInThreeSeconds() {
		$.get("/currentcount", function(LatestCount) {
			console.log("VisitCount : " + LatestCount);
			$("#visitCount").text(LatestCount);
		});
	}
</script>
</html>
