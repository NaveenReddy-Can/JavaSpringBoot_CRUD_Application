<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet" href="style.css">
<title>Display All</title>
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
	crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
	crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.4.1.min.js"
	integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	crossorigin="anonymous"></script>
</head>
<body style="background-color: #a3bf62">
	<nav class="navbar navbar-dark bg-dark">
		<ul class="nav nav-pills">
			<li class="nav-item"><a class="nav-link" aria-current="page"
				href="/">Home</a></li>
			<li class="nav-item"><a class="nav-link" href="/createperson">Create
					person</a></li>
			<li class="nav-item"><a class="nav-link active"
				href="/allpersons">List all Persons</a></li>
			<li class="nav-item disabled" ><a class="nav-link" href="/#">Inconsistent
					Person Data</a></li>
		</ul>
	</nav>
	<h2 style="text-align: center">All Users</h2>

	<div class="col-6 mx-auto">
		<table class="table table-dark">
			<thead class="table-dark">
				<tr>
					<th scope="col">Id</th>
					<th scope="col">Name</th>
					<th scope="col">Gender</th>
					<th scope="col">Email</th>
				</tr>
			</thead>
			<tbody>
				<tr class="table-active" th:each="person: ${persons}">
					<td th:text="${person.id}" />
					<td th:text="${person.name}" />
					<td th:text="${person.gender}" />
					<td th:text="${person.email}" />
				</tr>
			</tbody>
		</table>
	</div>
	<div class="center">
		<form th:action="@{/currentcount}" th:object="${latestPageCount}">
			<h3>
				Current visiters count : <span id="visitCount"></span>
			</h3>
		</form>
	</div>
</body>
<script type="text/javascript">
	/* timer for auto refresh the page by calling the method in every 3 seconds*/
	setInterval(autoRefreshInThreeSeconds, 3000);

	//function to get the visit count and printing on console 
	function autoRefreshInThreeSeconds() {
		$.get("/currentcount", function(LatestCount) {
			console.log("VisitCount : " + LatestCount);
			$("#visitCount").text(LatestCount);
		});
	}
</script>
<footer>
	<p>
		Author: Naveen Reddy <br> Java Spring Project <br> <a
			href="mailto:nrkb1998@gmail.com">nrkb1998@gmail.com</a>
	</p>
</footer>


</html>